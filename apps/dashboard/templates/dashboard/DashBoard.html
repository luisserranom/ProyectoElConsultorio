{% extends 'core/base.html' %}

{% load static %}

{% block boostrap %}
  <link href="{% static 'dashboard/css/style-dashboard.css' %} " type="text/css" rel="stylesheet" >
  <script src="{% static 'dashboard/js/datos_table.js' %}"></script>
{% endblock %}

{% block title %} DASHBOARD {% endblock  %}


 {% block content  %}
 
    <!--COMIENZO DEL NUEVO-->
    <div class="d-flex" id="content-wrapper" style="margin-bottom: 40px;"  >

      <!-- Sidebar -->
      <div id="sidebar-container" class="bg-primary" style="background-color: #7f2525; padding-bottom: 0px; ">
          <div class="logo" style="background-color: #25647f; padding-top: 30px; padding-bottom: 30px; padding-left: 10px;">
              <h4 class="text-light font-weight-bold mb-0">Médicos</h4>
          </div>
          <div class="menu" style="background-color: #25647f; padding-bottom: 250px;">
                {% if especialista %}
                    {% for especialista in especialista  %}
                    <label  id="test" style="display:None">{{countPaciente}}</label>
                    <a href="{% url 'datos-dash' especialista.id_especialista %}" class="d-block text-light p-3 border-0"><i class="icon ion-md-apps lead mr-2"></i>
                        {{especialista.nombre_especialista}} {{especialista.apellido_especialista}}</a>
                    {% endfor %}
                {% endif %}
             
          </div>
      </div>
      <!-- Fin sidebar -->  
      <div id="content" class="bg-grey w-100" >

            <section class="bg-light py-3" >
                <div class="container">
                    <div class="row">
                        <div class="col-lg-9 col-md-8" >
                          <h1 class="font-weight-bold mb-0">Bienvenido</h1>
                          <p class="lead text-muted">Estadisticas de pacientes atendidos</p>
                        </div>
              
                    </div>
                </div>
            </section>

            

            <section>
                <div class="container" >
                    <div class="row">
                        <div class="col-lg-8 my-3">
                            <div class="card rounded-0">
                                <div class="card-header bg-light">
                                  <h6 class="font-weight-bold mb-0">Número pacientes por medico</h6>
                                </div>
                                <div class="card-body">
                                  <canvas id="myChart" width="300" height="150"></canvas>
                                </div>
                            </div>
                        </div>
                        
                          </div>
                        </div>
                    </div>
                </div>
            </section>

      </div>

      </div>
  </div>

  <!-- Optional JavaScript -->
  <!-- jQuery first, then Popper.js, then Bootstrap JS -->
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
      integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
      crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
      crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js" integrity="sha256-R4pqcOYV8lt7snxMQO/HSbVCFRPMdrhAFMH+vr9giYI=" crossorigin="anonymous"></script>
      <script>
          var ctx = document.getElementById('myChart').getContext('2d');
          var myChart = new Chart(ctx, { 
              type: 'bar',
              data: {
                  labels: ['Abri 2022', 'May 2022', 'Jun 2022', 'Jul 2022'],
                  datasets: [{
                      label: 'Nuevos usuarios',
                      data: [50,52,45,{{countPaciente}} ],
                      backgroundColor: [
                          '#12C9E5',  
                          '#12C9E5',
                          '#12C9E5',
                          '#111B54'
                      ],
                      maxBarThickness: 30,
                      maxBarLength: 2
                  }]
              },
              options: {
                  scales: {
                      yAxes: [{
                          ticks: {
                              beginAtZero: true
                          }
                      }]
                  }
              }
          });
          </script>
    
{% endblock %}

              

